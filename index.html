<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Radar Command</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: monospace;
  background: #1a1a1a;
  color: #d0d0d0;
  overflow: hidden;
}

/* ================= TOP BAR ================= */

#topbar {
  height: 36px;
  background: #2b2b2b;
  border-bottom: 1px solid #444;
  display: flex;
  align-items: center;
  padding: 0 10px;
  font-size: 12px;
}

#logo {
  font-weight: bold;
  color: #9fdcff;
}

#topbar-right {
  margin-left: auto;
  display: flex;
  gap: 15px;
}

/* ================= LAYOUT ================= */

#container {
  display: flex;
  height: calc(100vh - 36px);
}

/* ================= CENTER ================= */

#center {
  flex: 1;
  display: flex;
  flex-direction: column;
}

#mainView {
  flex: 1;
  background: #0c1418;
}

canvas {
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, #0f2a33 0%, #050a0d 70%);
}

/* ================= BOTTOM ================= */

#bottombar {
  height: 40px;
  background: #2b2b2b;
  border-top: 1px solid #444;
  display: flex;
  align-items: center;
  padding: 0 10px;
  font-size: 12px;
}

/* ================= RIGHT PANEL ================= */

#rightbar {
  width: 260px;
  background: #2f2f2f;
  border-left: 1px solid #444;
}

.panel {
  border-bottom: 1px solid #444;
  padding: 8px;
  font-size: 12px;
}

.panel h3 {
  margin: 0 0 6px;
  font-size: 12px;
  color: #fff;
  border-bottom: 1px solid #555;
  padding-bottom: 4px;
}

.value { color: #9fdcff; }
.muted { color: #888; }

</style>
</head>

<body>

<!-- ================= TOP BAR ================= -->
<div id="topbar">
  <div id="logo">RADAR CMD</div>

  <div id="topbar-right">
    <div id="zulu">Zulu: --:--:--</div>
    <div id="local">Local: --:--:--</div>
    <div id="zoomInfo">Zoom: 100%</div>
  </div>
</div>

<!-- ================= MAIN ================= -->
<div id="container">

  <div id="center">
    <div id="mainView">
      <canvas id="radar"></canvas>
    </div>
    <div id="bottombar">
      Message Log | Scroll to Zoom | Click Aircraft to Select
    </div>
  </div>

  <div id="rightbar">
    <div class="panel">
      <h3>UNIT STATUS</h3>
      <div id="unitInfo" class="muted">
        Please Select A Designated Unit.
      </div>
    </div>
  </div>

</div>

<script>

/* ================= TIME ================= */

function updateTime() {
  const now = new Date();
  document.getElementById("local").textContent =
    "Local: " + now.toLocaleTimeString();

  document.getElementById("zulu").textContent =
    "Zulu: " + now.toUTCString().slice(17, 25);
}
setInterval(updateTime, 1000);
updateTime();

/* ================= CANVAS ================= */

const canvas = document.getElementById("radar");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
}
window.addEventListener("resize", resize);
resize();

/* ================= ZOOM ================= */

let zoom = 1;

canvas.addEventListener("wheel", e => {
  e.preventDefault();
  zoom += e.deltaY * -0.001;
  zoom = Math.min(Math.max(zoom, 0.5), 2.5);
  document.getElementById("zoomInfo").textContent =
    "Zoom: " + Math.round(zoom * 100) + "%";
});

/* ================= AIRCRAFT ================= */

const aircraft = [];
let selected = null;

function spawnAircraft() {
  return {
    angle: Math.random() * Math.PI * 2,
    radius: 200 + Math.random() * 200,
    speed: 0.002 + Math.random() * 0.002,
    altitude: Math.floor(10000 + Math.random() * 20000),
    type: Math.random() > 0.5 ? "Civilian" : "Military"
  };
}

for (let i = 0; i < 8; i++) aircraft.push(spawnAircraft());

canvas.addEventListener("click", e => {
  const rect = canvas.getBoundingClientRect();
  const mx = e.clientX - rect.left;
  const my = e.clientY - rect.top;

  selected = null;

  aircraft.forEach(a => {
    const cx = canvas.width / 2;
    const cy = canvas.height / 2;
    const x = cx + Math.cos(a.angle) * a.radius * zoom;
    const y = cy + Math.sin(a.angle) * a.radius * zoom;

    if (Math.hypot(mx - x, my - y) < 6) selected = a;
  });

  updatePanel();
});

/* ================= UI ================= */

function updatePanel() {
  const panel = document.getElementById("unitInfo");

  if (!selected) {
    panel.innerHTML = "Please Select A Designated Unit.";
    panel.className = "muted";
    return;
  }

  panel.className = "";
  panel.innerHTML = `
    Type: <span class="value">${selected.type}</span><br>
    Altitude: <span class="value">${selected.altitude} ft</span><br>
    Speed: <span class="value">${Math.round(selected.speed * 50000)} kts</span>
  `;
}

/* ================= LOOP ================= */

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  const cx = canvas.width / 2;
  const cy = canvas.height / 2;

  ctx.strokeStyle = "#12333f";
  for (let r = 80; r < Math.min(cx, cy); r += 80) {
    ctx.beginPath();
    ctx.arc(cx, cy, r * zoom, 0, Math.PI * 2);
    ctx.stroke();
  }

  aircraft.forEach(a => {
    a.angle += a.speed;

    const x = cx + Math.cos(a.angle) * a.radius * zoom;
    const y = cy + Math.sin(a.angle) * a.radius * zoom;

    ctx.beginPath();
    ctx.arc(x, y, 4, 0, Math.PI * 2);
    ctx.fillStyle = a === selected ? "#ffcc00" : "#7fdcff";
    ctx.fill();
  });

  requestAnimationFrame(draw);
}

draw();

</script>

</body>
</html>
