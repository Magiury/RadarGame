<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Radar Command</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: monospace;
  background: #000;
  color: #8fdcff;
  overflow: hidden;
}

/* ================= TOP BAR ================= */

#topbar {
  height: 34px;
  background: #101820;
  border-bottom: 1px solid #1f2f3a;
  display: flex;
  align-items: center;
  padding: 0 10px;
  font-size: 12px;
}

#logo {
  font-weight: bold;
  color: #9fdcff;
}

#topbar-right {
  margin-left: auto;
  display: flex;
  gap: 15px;
}

/* ================= LAYOUT ================= */

#container {
  display: flex;
  height: calc(100vh - 34px);
}

#center {
  flex: 1;
  display: flex;
  flex-direction: column;
}

canvas {
  width: 100%;
  height: 100%;
  background: #02070c;
}

#rightbar {
  width: 260px;
  background: #101820;
  border-left: 1px solid #1f2f3a;
}

.panel {
  border-bottom: 1px solid #1f2f3a;
  padding: 8px;
  font-size: 12px;
}

.panel h3 {
  margin: 0 0 6px;
  font-size: 12px;
  color: #fff;
  border-bottom: 1px solid #2b3f4f;
  padding-bottom: 4px;
}

.muted { color: #667; }
.value { color: #9fdcff; }
</style>
</head>

<body>

<div id="topbar">
  <div id="logo">RADAR CMD</div>
  <div id="topbar-right">
    <div id="zulu">Zulu: --:--:--</div>
    <div id="local">Local: --:--:--</div>
  </div>
</div>

<div id="container">

  <div id="center">
    <canvas id="radar"></canvas>
  </div>

  <div id="rightbar">
    <div class="panel">
      <h3>UNIT STATUS</h3>
      <div id="unitInfo" class="muted">
        Please Select A Designated Unit.
      </div>
    </div>
  </div>

</div>

<script>
/* ================= TIME ================= */

function updateTime() {
  const now = new Date();
  document.getElementById("local").textContent =
    "Local: " + now.toLocaleTimeString();
  document.getElementById("zulu").textContent =
    "Zulu: " + now.toUTCString().slice(17, 25);
}
setInterval(updateTime, 1000);
updateTime();

/* ================= CANVAS ================= */

const canvas = document.getElementById("radar");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
}
window.addEventListener("resize", resize);
resize();

/* ================= RADAR OVERLAY ================= */

function drawOverlay() {
  const cx = canvas.width / 2;
  const cy = canvas.height / 2;

  ctx.strokeStyle = "#163a4a";
  ctx.lineWidth = 1;

  for (let r = 80; r < Math.min(cx, cy); r += 80) {
    ctx.beginPath();
    ctx.arc(cx, cy, r, 0, Math.PI * 2);
    ctx.stroke();
  }

  for (let a = 0; a < 360; a += 30) {
    const rad = a * Math.PI / 180;
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(cx + Math.cos(rad) * cx, cy + Math.sin(rad) * cy);
    ctx.stroke();
  }
}

/* ================= AIRCRAFT ================= */

const SHAPES = ["circle", "square", "diamond", "triangle", "rect"];
const TYPES = ["Passenger", "Cargo", "Friendly Military", "Foreign Military"];

const aircraft = [];
let selected = null;

function spawnAircraft() {
  return {
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    vx: (Math.random() - 0.5) * 0.08,
    vy: (Math.random() - 0.5) * 0.08,
    shape: SHAPES[Math.floor(Math.random() * SHAPES.length)],
    type: TYPES[Math.floor(Math.random() * TYPES.length)],
    altitude: Math.floor(8000 + Math.random() * 30000),
    speed: Math.floor(350 + Math.random() * 200)
  };
}

for (let i = 0; i < 14; i++) aircraft.push(spawnAircraft());

canvas.addEventListener("click", e => {
  const r = canvas.getBoundingClientRect();
  const mx = e.clientX - r.left;
  const my = e.clientY - r.top;

  selected = null;

  aircraft.forEach(a => {
    if (Math.hypot(mx - a.x, my - a.y) < 8) selected = a;
  });

  updatePanel();
});

function updatePanel() {
  const panel = document.getElementById("unitInfo");

  if (!selected) {
    panel.textContent = "Please Select A Designated Unit.";
    panel.className = "muted";
    return;
  }

  panel.className = "";
  panel.innerHTML = `
    Type: <span class="value">${selected.type}</span><br>
    Altitude: <span class="value">${selected.altitude} ft</span><br>
    Speed: <span class="value">${selected.speed} kts</span>
  `;
}

/* ================= DRAW SHAPES ================= */

function drawShape(a) {
  ctx.beginPath();

  switch (a.shape) {
    case "circle":
      ctx.arc(a.x, a.y, 4, 0, Math.PI * 2);
      break;
    case "square":
      ctx.rect(a.x - 4, a.y - 4, 8, 8);
      break;
    case "diamond":
      ctx.moveTo(a.x, a.y - 5);
      ctx.lineTo(a.x + 5, a.y);
      ctx.lineTo(a.x, a.y + 5);
      ctx.lineTo(a.x - 5, a.y);
      ctx.closePath();
      break;
    case "triangle":
      ctx.moveTo(a.x, a.y - 5);
      ctx.lineTo(a.x + 5, a.y + 5);
      ctx.lineTo(a.x - 5, a.y + 5);
      ctx.closePath();
      break;
    case "rect":
      ctx.rect(a.x - 6, a.y - 3, 12, 6);
      break;
  }

  ctx.fill();
}

/* ================= LOOP ================= */

let last = performance.now();

function loop(now) {
  const dt = (now - last) / 1000;
  last = now;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawOverlay();

  aircraft.forEach(a => {
    /* slow + jitter */
    if (Math.random() < 0.15) {
      a.x += (Math.random() - 0.5) * 2;
      a.y += (Math.random() - 0.5) * 2;
    }

    a.x += a.vx * dt * 60 * 5;
    a.y += a.vy * dt * 60 * 5;

    if (a.x < 0) a.x = canvas.width;
    if (a.y < 0) a.y = canvas.height;
    if (a.x > canvas.width) a.x = 0;
    if (a.y > canvas.height) a.y = 0;

    ctx.fillStyle = a === selected ? "#ffd966" : "#9fdcff";
    drawShape(a);
  });

  requestAnimationFrame(loop);
}

requestAnimationFrame(loop);
</script>

</body>
</html>
